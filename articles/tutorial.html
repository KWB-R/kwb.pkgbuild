<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="kwb.pkgbuild">
<title>Create KWB-R Package from Scratch • kwb.pkgbuild</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create KWB-R Package from Scratch">
<meta property="og:description" content="kwb.pkgbuild">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">kwb.pkgbuild</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/install.html">How to Install KWB-R Packages From GitHub</a>
    <a class="dropdown-item" href="../articles/tutorial.html">Create KWB-R Package from Scratch</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/KWB-R/kwb.pkgbuild/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="tutorial_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create KWB-R Package from Scratch</h1>
                        <h4 data-toc-skip class="author">Michael Rustler, Hauke Sonnenberg</h4>
            
            <h4 data-toc-skip class="date">2022-02-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/KWB-R/kwb.pkgbuild/blob/HEAD/vignettes/tutorial.Rmd" class="external-link"><code>vignettes/tutorial.Rmd</code></a></small>
      <div class="d-none name"><code>tutorial.Rmd</code></div>
    </div>

    
    
<p>This tutorial explains how to setup an R package so that it complies with a default style. We apply this default style to all KWB-packages that we host on our GitHub account <a href="https://github.com/KWB-R" class="external-link">KWB-R</a>. The aim is to present all packages in a common manner (consistent DESCRIPTION and documentation) and to use the same services (continuous integration, code coverage) for all our packages.</p>
<p>This package provides functions to:</p>
<ul>
<li>generate a <a href="http://r-pkgs.had.co.nz/description.html" class="external-link">DESCRIPTION</a> file in which fields are already set to “our” defaults. For example, the licence field is set to the open source licence MIT. An additional LICENCE file is added that informs about KWB being the copyright holder of the package.</li>
<li>generate files that control the automatic generation of documentation files.</li>
<li>generate files that control continuous integration, i.e. the automatic building and testing of the package.</li>
</ul>
<div class="section level2">
<h2 id="install-required-r-packages">1 Install required R packages<a class="anchor" aria-label="anchor" href="#install-required-r-packages"></a>
</h2>
<p>Before you can use the package kwb.pkgdown you need to</p>
<ul>
<li>install packages that kwb.pkgdown relies on from the <a href="https://cloud.r-project.org" class="external-link">Comprehensive R Archive Network (CRAN)</a>,</li>
<li>install kwb.pkddown from <a href="https://github.com" class="external-link">GitHub</a>.</li>
</ul>
<p>Install required packages that are not yet available in your local R user library from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Define the names of required packages:</span>
<span class="co"># - remotes: functions to install R packages from Github</span>
<span class="co"># - pkgdown: functions to create a package website</span>
<span class="va">required</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"remotes"</span>, <span class="st">"pkgdown"</span><span class="op">)</span>

<span class="co"># Get the names of packages that are already installed</span>
<span class="va">installed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Determine the packages that are not yet installed</span>
<span class="va">packages</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="va">required</span>, <span class="va">installed</span><span class="op">)</span>

<span class="co"># Install the packages from CRAN</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">package</span> <span class="kw">in</span> <span class="va">packages</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="va">package</span>, repos <span class="op">=</span> <span class="st">"https://cloud.r-project.org"</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>The remotes package should now be installed. It allows to install further R packages directly from GitHub. Therefore, the functions of the remotes package need to communicate with the GitHub server. To gain authenticated access to the GitHub server we set a so called Private Access Token (PAT) in the following. This token is then automatically used whenever the GitHub server is accessed. Please see the <a href="install.html">Installation vignette</a> to learn how to get your personal GitHub PAT and use that token instead of <code>Put your Private Access Token here</code> in the following command:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>GITHUB_PAT <span class="op">=</span> <span class="st">"Put your Private Access Token here"</span><span class="op">)</span></code></pre></div>
<p>Now, that the access token is set, you can use <code><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github()</a></code> from the remotes packages to install the latest version of this package directly from our GitHub account:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"KWB-R/kwb.pkgbuild"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="configure-and-create-your-package">2 Configure and create your package<a class="anchor" aria-label="anchor" href="#configure-and-create-your-package"></a>
</h2>
<p>Secondly, personalise your R package by adapting a default template that we propose for KWB packages and that is contained in the R package <code>kwb.pkgbuild</code>.</p>
<div class="section level3">
<h3 id="prepare-a-package-directory">2.1 Prepare a package directory<a class="anchor" aria-label="anchor" href="#prepare-a-package-directory"></a>
</h3>
<p>The source code of your package should be under version control. We encourage you to create a GitHub repository on our <a href="https://github.com/kwb-r" class="external-link">GitHub account</a> that represents the package. Having a package as a repository on GitHub has the advantage that it can be easily installed directly from there with no more than running <code>remotes::install_github("kwb-r/&lt;package_name&gt;")</code>. Once you have created the GitHub repository, <a href="https://help.github.com/articles/cloning-a-repository/" class="external-link">clone</a> it to a folder on your local machine.</p>
<p>You can let RStudio do the cloning for you. Therefore,</p>
<ul>
<li>select “File &gt; New Project…” from the main menu,</li>
<li>select “Version Control &gt; Git”,</li>
<li>set “Repository URL” to your new repository, such as <code>https://github.com/kwb-r/&lt;package_name&gt;</code>,</li>
<li>set “Project directory name” to your <code>&lt;package_name&gt;</code> (this should be the default),</li>
<li>set “Create project as subdirectory of” to the folder in which you want to store your local copies of your github repositories, e.g. to <code>~/github-repos</code>.</li>
<li>click on “Create Project” to let RStudio copy the package repository from GitHub onto your local machine.</li>
</ul>
<p>For the steps described in the following, you need to provide the name of the package in a variable <code>package</code> and the path to the local directory to which GitHub repositories are cloned in a variable <code>repo_dir</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Set the name of your (!) new package</span>
<span class="va">package</span> <span class="op">&lt;-</span> <span class="st">"kwb.newpackage"</span>

<span class="co"># Set the path to your (!) local folder to which GitHub repositories are cloned</span>
<span class="va">repo_dir</span> <span class="op">&lt;-</span> <span class="st">"~/github-repos"</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-empty-r-package">2.2 Create empty R package<a class="anchor" aria-label="anchor" href="#create-empty-r-package"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Set the path to the package directory</span>
<span class="va">pkg_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">repo_dir</span>, <span class="va">package</span><span class="op">)</span>

<span class="co"># Create directory for R package</span>
<span class="fu">kwb.pkgbuild</span><span class="fu">::</span><span class="fu"><a href="../reference/create_pkg_dir.html">create_pkg_dir</a></span><span class="op">(</span><span class="va">pkg_dir</span><span class="op">)</span>
<span class="co">#&gt; /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpbDiuMS/kwb.newpackage is a valid 'root_dir' for pkg 'kwb.newpackage'</span>
<span class="co">#&gt; [1] "/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T//RtmpbDiuMS/kwb.newpackage"</span>

<span class="co"># Create a default package structure</span>
<span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_dir.html" class="external-link">with_dir</a></span><span class="op">(</span><span class="va">pkg_dir</span>, <span class="op">{</span><span class="fu">kwb.pkgbuild</span><span class="fu">::</span><span class="fu"><a href="../reference/use_pkg_skeleton.html">use_pkg_skeleton</a></span><span class="op">(</span><span class="va">package</span><span class="op">)</span><span class="op">}</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #00BB00;">✔</span> Setting active project to <span style="color: #0000BB;">'/private/var/folders/</span></span>
<span class="co"><span style="color: #0000BB;">#&gt; 24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/RtmpbDiuMS/kwb.newpackage'</span></span>
<span class="co">#&gt; <span style="color: #00BB00;">✔</span> Writing <span style="color: #0000BB;">'kwb.newpackage.Rproj'</span></span>
<span class="co">#&gt; <span style="color: #00BB00;">✔</span> Adding <span style="color: #0000BB;">'.Rproj.user'</span> to <span style="color: #0000BB;">'.gitignore'</span></span>
<span class="co">#&gt; NULL</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="parameterise-your-r-package">2.3 Parameterise your R package<a class="anchor" aria-label="anchor" href="#parameterise-your-r-package"></a>
</h3>
<p>In the following, we present the commands required to setup and create your new package. We suggest that you write the corresponding code into a <code>.R</code> script file (e.g. <code>setup_package.R</code>). Once the package is created, we suggest to put the script file into the <code>inst/extdata</code> folder of your package. This makes the creation of the package reproducible and can be used as a template for the creation of further packages.</p>
<div class="section level4">
<h4 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a>
</h4>
<p>Minimum requirement: the author needs at least to have a (full) name:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">author</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Max Mustermann"</span><span class="op">)</span></code></pre></div>
<p>You can add further information such as a personal website or the <a href="https://orcid.org/" class="external-link">ORCID</a> of the author:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">author</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
  name <span class="op">=</span> <span class="st">"Michael Rustler"</span>, 
  orcid <span class="op">=</span> <span class="st">"0000-0003-0647-7726"</span>,
  url <span class="op">=</span> <span class="st">"http://mrustl.de"</span>
<span class="op">)</span></code></pre></div>
<p>The ORCID uniquely identifies the author of a web ressource and thus allows to find different works of one and the same author on the web.</p>
<p>If you do not know your ORCID, have a look at our package <a href="https://github.com/kwb-r/kwb.orcid" class="external-link">kwb.orcid</a>. It allows to search ORCIDs by name, once you have created an account at <a href="https://orcid.org/" class="external-link">orcid.org</a>.</p>
<p>In addition, this package stores the ORCIDs of KWB researchers of whom we know their ORCID. Once you have kwb.orcid installed, you can access these ORCIDs with:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">kwb.orcid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/kwb.orcid/man/get_kwb_orcids.html" class="external-link">get_kwb_orcids</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;     Andreas Matzinger    Christoph Sprenger          Daniel Wicke </span>
<span class="co">#&gt; "0000-0001-5483-4594" "0000-0002-0178-6645" "0000-0002-5722-5433" </span>
<span class="co">#&gt;      Hauke Sonnenberg       Michael Rustler       Nicolas Caradot </span>
<span class="co">#&gt; "0000-0001-9134-2871" "0000-0003-0647-7726" "0000-0002-5252-4880" </span>
<span class="co">#&gt;         Wolfgang Seis </span>
<span class="co">#&gt; "0000-0002-7436-8575"</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="package-description">Package description<a class="anchor" aria-label="anchor" href="#package-description"></a>
</h4>
<p>The package description needs three entries</p>
<ul>
<li><p><strong>name</strong>: name of the package</p></li>
<li><p><strong>title</strong>: title of your R package (which is automatically converted to title case with the function <code><a href="https://rdrr.io/r/tools/toTitleCase.html" class="external-link">tools::toTitleCase()</a></code>)</p></li>
<li><p><strong>desc:</strong> package description. Should be at least one sentence long and needs to end with a period!</p></li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">description</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
  name <span class="op">=</span> <span class="va">package</span>, 
  title <span class="op">=</span> <span class="st">"My new KWB R package"</span>, 
  desc  <span class="op">=</span> <span class="st">"My super cool new R package in KWB default styling."</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="create-r-package-structure-in-kwb-r-style">2.4 Create R package structure in KWB-R style<a class="anchor" aria-label="anchor" href="#create-r-package-structure-in-kwb-r-style"></a>
</h3>
<p>Running the following code not only creates an R package structure but also adds some KWB-R specfic styling, e.g.:</p>
<ul>
<li>
<p>Adding configution files for:</p>
<ul>
<li><p>Continous integration on windows (<a href="https://appveyor.com" class="external-link uri">https://appveyor.com</a>) and linux (<a href="https://travis-ci.org/KWB-R" class="external-link uri">https://travis-ci.org/KWB-R</a>)</p></li>
<li><p>Code coverage in R package using the servive <a href="codecov.io">codecov.io</a></p></li>
<li><p>Backup of Github repositories on our mirrored KWB-R group on <a href="https://gitlab.com/KWB-R" class="external-link">Gitlab</a></p></li>
</ul>
</li>
<li><p>Indicates the current lifecycle of the R package according to <a href="https://www.tidyverse.org/lifecycle/" class="external-link uri">https://www.tidyverse.org/lifecycle/</a></p></li>
<li><p>Uses by default the permissive <a href="https://opensource.org/licenses/MIT" class="external-link"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="MIT"></a> for all public R packages currently hosted on Github (see: <a href="http://kwb-r.github.io/status/" class="external-link uri">http://kwb-r.github.io/status/</a>) and lists KWB as copyright holder (see e.g. <a href="https://kwb-r.github.io/kwb.pkgbuild/authors.html" class="external-link">here</a>)</p></li>
<li><p>Creates <code>README</code> files (<code>README.Rmd</code> and <code>README.md</code>) for the above mentioned topics and</p></li>
<li><p>Prepares a KWB-R flavored documentation website template named <code>_packagedown.yml</code> needed by <a href="http://pkgdown.r-lib.org/" class="external-link uri">http://pkgdown.r-lib.org/</a></p></li>
</ul>
<p>Running the following R function will create the R package with the <code>version</code> = <code>0.0.0.9000</code> and development stage <code>experimental</code> (defined <a href="https://www.tidyverse.org/lifecycle/#experimental" class="external-link">here</a>).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="va">pkg_dir</span><span class="op">)</span>

<span class="fu">kwb.pkgbuild</span><span class="fu">::</span><span class="fu"><a href="../reference/use_pkg.html">use_pkg</a></span><span class="op">(</span>
  <span class="va">author</span>, 
  <span class="va">description</span>, 
  version <span class="op">=</span> <span class="st">"0.0.0.9000"</span>, 
  stage <span class="op">=</span> <span class="st">"experimental"</span>
<span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="add-your-r-functions">2.5 Add your R functions<a class="anchor" aria-label="anchor" href="#add-your-r-functions"></a>
</h3>
<p>Add your R functions in the folder <code>R</code>/. By using <code><a href="https://usethis.r-lib.org/reference/use_r.html" class="external-link">usethis::use_r</a></code> with the parameter <code>name</code> = <code>function</code> an empty R script is already stored in the right folder <code>R/</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_r.html" class="external-link">use_r</a></span><span class="op">(</span><span class="st">"function"</span><span class="op">)</span></code></pre></div>
<p>For writing your R code/functions please follow the tidyverse coding style (<a href="https://style.tidyverse.org/" class="external-link uri">https://style.tidyverse.org/</a>), which serves as our default KWB-R style.</p>
<p>Now you just need to fill it with content (i.e. your functions) and document it using <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/rd.html" class="external-link">roxygen2</a>. If you have already defined a function you can add a <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/rd.html" class="external-link">roxygen2</a> skeleton by using clicking on the <code>Insert Roxygen Skeleton</code> button in RStudio as shown below.</p>
<p><img src="images/add_roxygen.jpg"><!-- --></p>
<p>More information on documentation in R is provided here: <a href="http://r-pkgs.had.co.nz/man.html" class="external-link">http://r-pkgs.had.co.nz/man.html</a></p>
</div>
</div>
<div class="section level2">
<h2 id="check-your-package">3 Check your package<a class="anchor" aria-label="anchor" href="#check-your-package"></a>
</h2>
<p>Once you completed all the steps above go to the upper right panel in RStudio and click on <code>Build</code> -&gt; <code>More</code> -&gt; <code>Configure build tools</code> as shown below.</p>
<p><img src="images/build_check_01.jpg"><!-- --></p>
<p>Then click on <code>Configure</code> and a new window opens. Here you select everything as shown below:</p>
<p><img src="images/build_check_02.jpg"><!-- --></p>
<p>After doing so accept the settings by two times clicking <code>Ok</code>.</p>
<p>Subsequently click the <code>Check</code> button so that your package is cross-checked for possible problems (e.g. wrong documentation, missing package dependencies).</p>
<p>In case of missing package dependencies as shown below these should be added to the <a href="http://r-pkgs.had.co.nz/description.html" class="external-link">DESCRIPTION</a> file.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>Namespace dependencies not required<span class="op">:</span><span class="st"> 'fs'</span> <span class="st">'httr'</span> <span class="st">'stringr'</span> <span class="st">'usethis'</span> <span class="st">'yaml'</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>See section <span class="st">'The DESCRIPTION file'</span> <span class="cf">in</span> the <span class="st">'Writing R Extensions'</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>manual.</span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="op">*</span><span class="st"> </span>DONE</span>
<span id="cb12-5"><a href="#cb12-5"></a>Status<span class="op">:</span><span class="st"> </span><span class="dv">1</span> ERROR</span>
<span id="cb12-6"><a href="#cb12-6"></a></span>
<span id="cb12-7"><a href="#cb12-7"></a>See</span>
<span id="cb12-8"><a href="#cb12-8"></a>  <span class="st">'C:/Users/myname/Documents/RProjects/kwb.pkgbuild.Rcheck/00check.log'</span></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="cf">for</span> details.</span>
<span id="cb12-10"><a href="#cb12-10"></a></span>
<span id="cb12-11"><a href="#cb12-11"></a>checking package dependencies ... ERROR</span>
<span id="cb12-12"><a href="#cb12-12"></a>Namespace dependencies not required<span class="op">:</span><span class="st"> 'fs'</span> <span class="st">'httr'</span> <span class="st">'stringr'</span> <span class="st">'usethis'</span> <span class="st">'yaml'</span></span></code></pre></div>
<p>This can be done using the function <code><a href="https://usethis.r-lib.org/reference/use_package.html" class="external-link">usethis::use_package()</a></code> as shown below:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>pkg_dependencies &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'fs'</span>, <span class="st">'httr'</span>, <span class="st">'stringr'</span>, <span class="st">'usethis'</span>, <span class="st">'yaml'</span>)</span>
<span id="cb13-2"><a href="#cb13-2"></a></span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="kw">sapply</span>(pkg_dependencies, usethis<span class="op">::</span>use_package)</span>
<span id="cb13-4"><a href="#cb13-4"></a></span>
<span id="cb13-5"><a href="#cb13-5"></a>✔ Adding <span class="st">'fs'</span> to Imports field <span class="cf">in</span> DESCRIPTION</span>
<span id="cb13-6"><a href="#cb13-6"></a>● Refer to functions with <span class="st">`</span><span class="dt">fs::fun()</span><span class="st">`</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>✔ Adding <span class="st">'httr'</span> to Imports field <span class="cf">in</span> DESCRIPTION</span>
<span id="cb13-8"><a href="#cb13-8"></a>● Refer to functions with <span class="st">`</span><span class="dt">httr::fun()</span><span class="st">`</span></span>
<span id="cb13-9"><a href="#cb13-9"></a>✔ Adding <span class="st">'stringr'</span> to Imports field <span class="cf">in</span> DESCRIPTION</span>
<span id="cb13-10"><a href="#cb13-10"></a>● Refer to functions with <span class="st">`</span><span class="dt">stringr::fun()</span><span class="st">`</span></span>
<span id="cb13-11"><a href="#cb13-11"></a>✔ Adding <span class="st">'usethis'</span> to Imports field <span class="cf">in</span> DESCRIPTION</span>
<span id="cb13-12"><a href="#cb13-12"></a>● Refer to functions with <span class="st">`</span><span class="dt">usethis::fun()</span><span class="st">`</span></span>
<span id="cb13-13"><a href="#cb13-13"></a>✔ Adding <span class="st">'yaml'</span> to Imports field <span class="cf">in</span> DESCRIPTION</span>
<span id="cb13-14"><a href="#cb13-14"></a>● Refer to functions with <span class="st">`</span><span class="dt">yaml::fun()</span><span class="st">`</span></span></code></pre></div>
<p>Subsequently you should re-click on the <code>Check</code> button again and it should finish without errors.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>R CMD check results</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="dv">0</span> errors <span class="op">|</span><span class="st"> </span><span class="dv">0</span> warning  <span class="op">|</span><span class="st"> </span><span class="dv">0</span> note </span>
<span id="cb14-3"><a href="#cb14-3"></a></span>
<span id="cb14-4"><a href="#cb14-4"></a>R CMD check succeeded</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="build-your-package">4 Build your package<a class="anchor" aria-label="anchor" href="#build-your-package"></a>
</h2>
<p>Now you are ready for building your R package by clicking on the <code>Install and Restart</code> button. A successful installation should finish with <code>Done</code> as shown below:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="op">**</span><span class="st"> </span>building package indices</span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="op">**</span><span class="st"> </span>installing vignettes</span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="op">**</span><span class="st"> </span>testing <span class="cf">if</span> installed package can be loaded</span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="op">*</span><span class="st"> </span><span class="kw">DONE</span> (kwb.pkgbuild)</span>
<span id="cb15-5"><a href="#cb15-5"></a>In R CMD INSTALL</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="document-your-package">5 Document your package<a class="anchor" aria-label="anchor" href="#document-your-package"></a>
</h2>
<div class="section level3">
<h3 id="manually">5.1 Manually<a class="anchor" aria-label="anchor" href="#manually"></a>
</h3>
<p>Finally you should run <code><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">pkgdown::build_site()</a></code> in order to create an documentation website for your R package. Running this command will store the website in the subfolder <code>docs</code> within your R package.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">pkgdown</span><span class="fu">::</span><span class="fu"><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">build_site</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Once you upload your R package to Github this can be easily used as documentation page that you define in the settings page for your R package which is available at:</p>
<p><a href="https://github.com/KWB-R/" class="external-link uri">https://github.com/KWB-R/</a> <code>kwb.mycoolrpackage</code> /settings</p>
<p><img src="images/package_documentation.jpg"><!-- --></p>
</div>
<div class="section level3">
<h3 id="automatically">5.2 Automatically<a class="anchor" aria-label="anchor" href="#automatically"></a>
</h3>
<p>In case you have already a Github repo defined for your R package you can also automate the process of updating the <code><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">pkgdown::build_site()</a></code> by with the wrapper function <code><a href="../reference/use_autopkgdown.html">kwb.pkgbuild::use_autopkgdown()</a></code>, which:</p>
<ul>
<li><p>creates a new branch “gh-pages” where the documentation site is deployed</p></li>
<li><p>sets “docs” folder to “.gitignore” (as these files are now build on Travis)</p></li>
<li>
<p>prepares Github Actions by:</p>
<ul>
<li><p>creating “.github/workflows/” with <code><a href="../reference/use_ghactions.html">kwb.pkgbuild::use_ghactions()</a></code></p></li>
<li><p>creating an empty “gh-pages” branch with <code><a href="../reference/create_empty_branch_ghpages.html">kwb.pkgbuild::create_empty_branch_ghpages()</a></code></p></li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">kwb.pkgbuild</span><span class="fu">::</span><span class="fu"><a href="../reference/use_autopkgdown.html">use_autopkgdown</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Finally to need to go to:</p>
<p><a href="https://github.com/KWB-R/" class="external-link uri">https://github.com/KWB-R/</a> <code>kwb.mycoolrpackage</code> /settings</p>
<p>and set the “source” for Github Pages to the branch “gh-pages”. After each successful Travis build the documentation website is now also updated!</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://mrustl.de" class="external-link">Michael Rustler</a>, <a href="https://github.com/hsonne" class="external-link">Hauke Sonnenberg</a>, <a href="https://www.kompetenz-wasser.de/en/forschung/projekte/fakin" class="external-link"><img src="https://old.kompetenz-wasser.de/wp-content/uploads/2017/08/forschung-headerbild_fakin-2-1920x449.jpg" alt="Project FAKIN" width="72"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
